<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            <!--WEB-INF/dispatcher-servlet.xml-->            
            WEB-INF/easycoopfin-servlet.xml,
            WEB-INF/easycoopfin-security.xml,
            WEB-INF/apache-cxf-services.xml, 
            WEB-INF/applicationContext.xml           
        </param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    
    <!-- For concurren user --> 
        <listener>
          <listener-class>org.springframework.security.web.session.HttpSessionEventPublisher</listener-class>
        </listener>
      
  <listener>
        <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
    </listener>
     <listener>
    <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
  </listener>
  
  
  <context-param>
    <param-name>log4jConfigLocation</param-name>
    <param-value>/WEB-INF/easylog4j.properties</param-value>
  </context-param>
  <context-param>
    <param-name>webAppRootKey</param-name>
    <param-value>App.Root</param-value>
  </context-param>
   <!--   <listener>
	<description>ZK listener for session cleanup</description>
	<listener-class>org.zkoss.zk.ui.http.HttpSessionListener</listener-class>
    </listener> 
    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>*.do</url-pattern>
    </servlet-mapping>-->
    <servlet>
	<servlet-name>easycoopfin</servlet-name>
	<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
 <servlet-mapping>
	<servlet-name>easycoopfin</servlet-name>
	<url-pattern>/</url-pattern>
    </servlet-mapping>
   
    <servlet-mapping>
	<servlet-name>easycoopfin</servlet-name>
	<url-pattern>*.htm</url-pattern>
    </servlet-mapping>
    
    <servlet-mapping>
        <servlet-name>easycoopfin</servlet-name>
        <url-pattern>/views/*</url-pattern>
    </servlet-mapping>


    <servlet>
        <servlet-name>CXFServlet</servlet-name>
        <servlet-class>org.apache.cxf.transport.servlet.CXFServlet</servlet-class>
        <load-on-startup>2</load-on-startup>
    </servlet>
  
    <servlet-mapping>
        <servlet-name>CXFServlet</servlet-name>
        <url-pattern>/services/*</url-pattern>
    </servlet-mapping>
    
    <servlet>
    <servlet-name>ImageServlet</servlet-name>
    <servlet-class>net.sf.jasperreports.j2ee.servlets.ImageServlet</servlet-class> </servlet>
 <servlet-mapping>
     <servlet-name>ImageServlet</servlet-name>
     <url-pattern>/reports/reg/image</url-pattern>
 </servlet-mapping>

    <!-- With Servelet 3.0 and above general error page is possible -->
    
    <error-page>
        <location>/error</location>
    </error-page>
    
    
 <!--   <servlet>
	<servlet-name>jersey-serlvet</servlet-name>
	<servlet-class>org.glassfish.jersey.servlet.ServletContainer</servlet-class>
	<init-param>
		<param-name>jersey.config.server.provider.packages</param-name>
		<param-value>com.sift.gl.service</param-value>			
	</init-param>		
	<load-on-startup>2</load-on-startup>
    </servlet>
        <servlet-mapping>
		<servlet-name>jersey-serlvet</servlet-name>
		<url-pattern>/webserv/*</url-pattern>
	</servlet-mapping>
   -->
    <servlet>
	<servlet-name>jersey-serlvet</servlet-name>
	<servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
	<init-param>
		<param-name>com.sun.jersey.config.property.packages</param-name>
		<param-value>com.sift.gl.service,com.sift.financial.member.ws.services,com.sift.products.ws.service</param-value>			
	</init-param>		
	<load-on-startup>2</load-on-startup>
    </servlet>
        <servlet-mapping>
		<servlet-name>jersey-serlvet</servlet-name>
		<url-pattern>/webserv/*</url-pattern>
	</servlet-mapping>
        <servlet>
        <description>ZK loader for ZUML pages</description>
        <servlet-name>zkLoader</servlet-name>
        <servlet-class>org.zkoss.zk.ui.http.DHtmlLayoutServlet</servlet-class>
        <init-param>
            <param-name>update-uri</param-name>
            <param-value>/zkau</param-value>
        </init-param>
       <load-on-startup>3</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>zkLoader</servlet-name>
        <url-pattern>*.zul</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>zkLoader</servlet-name>
        <url-pattern>*.zhtml</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>zkLoader</servlet-name>
        <url-pattern>/zk/</url-pattern>
    </servlet-mapping>
    <servlet>
        <description>The asynchronous update engine for ZK</description>
        <servlet-name>auEngine</servlet-name>
        <servlet-class>org.zkoss.zk.au.http.DHtmlUpdateServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>auEngine</servlet-name>
        <url-pattern>/zkau/*</url-pattern>
    </servlet-mapping>
    <mime-mapping>
        <extension>zul</extension>
        <mime-type>text/html</mime-type>
    </mime-mapping>
    <!-- Uncomment if you want to use the ZK filter to post process the HTML output
	generated by other technology, such as JSP and velocity.-->
    <welcome-file-list>
        <welcome-file>index.htm</welcome-file>
    </welcome-file-list>
    <!--
    <jsp-config>
        <jsp-property-group>
            <display-name>jsptemplate</display-name>
            <url-pattern>*.jsp</url-pattern>
            
            <include-prelude>/WEB-INF/jsp/header.jsp</include-prelude>
            <include-coda>/WEB-INF/jsp/footer.jsp</include-coda>
           
        </jsp-property-group>
        <jsp-property-group>
            <display-name>zultemplate</display-name>
            <url-pattern>*.zul</url-pattern>
            <include-prelude>/WEB-INF/jsp/header.jsp</include-prelude>
            <include-coda>/WEB-INF/jsp/footer.jsp</include-coda>
        </jsp-property-group>
    </jsp-config>
    -->
    <!--  <filter>
            <filter-name>zkFilter</filter-name>
            <filter-class>org.zkoss.zk.ui.http.DHtmlLayoutFilter</filter-class>
            <init-param>
                    <param-name>extension</param-name>
                    <param-value>html</param-value>
            </init-param>
            <init-param>
                    <param-name>compress</param-name>
                    <param-value>true</param-value>
            </init-param>
    </filter>
    <filter-mapping>
            <filter-name>zkFilter</filter-name>
            <url-pattern>/zk/*</url-pattern>
    </filter-mapping>  -->
      
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping> 
   
        
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <resource-ref>
        <description>DB Connection</description>
        <res-ref-name>jdbc/easycoopfin</res-ref-name>
        <res-type>javax.sql.DataSource</res-type>
        <res-auth>Container</res-auth>
    </resource-ref>
    
    <env-entry>
        <description>Webservice URl call</description>
        <env-entry-name>webservicebaseurl</env-entry-name>
        <env-entry-type>java.lang.String</env-entry-type>
        <env-entry-value>http://localhost:8080/Easycoopfin/webserv</env-entry-value>
    </env-entry>
    
    <!-- url for cooperative creation on easycoop -->
    <env-entry>
        <description>Webservice URl EasyCoop</description>
        <env-entry-name>easycoopbaseurl</env-entry-name>
        <env-entry-type>java.lang.String</env-entry-type>
        <env-entry-value>http://localhost/easycoop/web/index.php?option=com_api&amp;app=siftmap&amp;format=raw</env-entry-value>
    </env-entry>
    
    
    <!-- Email Parameter Configuration -->
    <env-entry>
        <description>SMTP HOST</description>
        <env-entry-name>mail.host</env-entry-name>
        <env-entry-type>java.lang.String</env-entry-type>
        <env-entry-value>smtp.office365.com</env-entry-value>
        <!--env-entry-value>mail.sifthoyxdd.com</env-entry-value        
       <env-entry-value>mail1.africaprudentialregistrars.com mail.sifthoyxgg.com</env-entry-value>
         <env-entry-value>192.168.10.21</env-entry-value> -->
    </env-entry>
   
    <env-entry>
        <description>SMTP PORT</description>
        <env-entry-name>mail.port</env-entry-name>
        <env-entry-type>java.lang.String</env-entry-type>
         <env-entry-value>587</env-entry-value> 
        <!--<env-entry-value>26</env-entry-value> -->
    </env-entry> 
    
    <env-entry>
        <description>SMTP Authentication</description>
        <env-entry-name>mail.auth.enabled</env-entry-name>
        <env-entry-type>java.lang.String</env-entry-type>
        <env-entry-value>true</env-entry-value>
    </env-entry>
   
    <env-entry>
        <description>DEFAULT SENDER</description>
        <env-entry-name>mail.sender</env-entry-name>
        <env-entry-type>java.lang.String</env-entry-type>
        <env-entry-value>easycoopadmin@africaprudential.com</env-entry-value>
       <!--  <env-entry-value>eazycoopfin@gmail.com</env-entry-value> 
          <env-entry-value>ggg@sifthoyxdd.com</env-entry-value>  -->
    </env-entry>

    <env-entry>
        <description>SMTP USER</description>
        <env-entry-name>mail.user</env-entry-name>
        <env-entry-type>java.lang.String</env-entry-type>
        <env-entry-value>easycoopadmin@africaprudential.comERROR</env-entry-value>
        <!-- <env-entry-value>eazycoopfin@gmail.com</env-entry-value> -->
         <!--<env-entry-value>gggg@sifthoyxdddd.com</env-entry-value>-->
    </env-entry> 
   
    <env-entry>
        <description>SMTP PASSWORD </description>
        <env-entry-name>mail.pass</env-entry-name>
        <env-entry-type>java.lang.String</env-entry-type>
          <env-entry-value>Admin@321ERROR</env-entry-value>
        <!--<env-entry-value>gggggg</env-entry-value>-->
        <!-- <env-entry-value>eazycoopfin@1234  Companyinfo$1</env-entry-value>-->       
      <!--   <env-entry-value>superPASSWORD$</env-entry-value> -->
    </env-entry>

    <env-entry>
        <description>SMTP SSL </description>
        <env-entry-name>mail.ssl.enabled</env-entry-name>
        <env-entry-type>java.lang.String</env-entry-type>
        <env-entry-value>false</env-entry-value>
    </env-entry>

    <env-entry>
        <description>SMTP SSL 2 </description>
        <env-entry-name>mail.ssl.sslortls</env-entry-name>
        <env-entry-type>java.lang.String</env-entry-type>
        <env-entry-value>TLS</env-entry-value>
    </env-entry>
    
    <env-entry>
        <description>APPLICATION URI </description>
        <env-entry-name>app.uri</env-entry-name>
        <env-entry-type>java.lang.String</env-entry-type>
        <env-entry-value>http://localhost:8080/Easycoopfin</env-entry-value>
    </env-entry> 
 
    <env-entry>
        <description>uploadreports </description>
        <env-entry-name>uploadreports</env-entry-name>
        <env-entry-type>java.lang.String</env-entry-type>
        <env-entry-value>C:/easycoopfinuploads/uploadreports/</env-entry-value>
    </env-entry>   
    <env-entry>
        <description>Upload URl</description>
        <env-entry-name>uploadpath</env-entry-name>
        <env-entry-type>java.lang.String</env-entry-type>
        <env-entry-value>C:/easycoopfinuploads/uploadreports/</env-entry-value>
    </env-entry>
   
    <!-- SMS CONFIG -->   
    <env-entry>
        <description>SMS URI</description>
        <env-entry-name>sms.uri</env-entry-name>
        <env-entry-type>java.lang.String</env-entry-type>
        <env-entry-value>0</env-entry-value>
    </env-entry>

    <env-entry>
        <description>SMS PORT </description>
        <env-entry-name>sms.port</env-entry-name>
        <env-entry-type>java.lang.String</env-entry-type>
        <env-entry-value>1020</env-entry-value>
    </env-entry>   

    <env-entry>
        <description>SMS USER</description>
        <env-entry-name>sms.user</env-entry-name>
        <env-entry-type>java.lang.String</env-entry-type>
        <env-entry-value>APRPLC</env-entry-value>
    </env-entry>

    <env-entry>
        <description>SMS PASS</description>
        <env-entry-name>sms.pass</env-entry-name>
        <env-entry-type>java.lang.String</env-entry-type>
        <env-entry-value>registrars</env-entry-value>
    </env-entry>   

    <env-entry>
        <description>SMS SENDER </description>
        <env-entry-name>sms.sender</env-entry-name>
        <env-entry-type>java.lang.String</env-entry-type>
        <env-entry-value>EASYCOOPFIN</env-entry-value>
    </env-entry>

    <env-entry>
        <description>SMS OWNER EMAIL </description>
        <env-entry-name>sms.owneremail</env-entry-name>
        <env-entry-type>java.lang.String</env-entry-type>
        <env-entry-value>itcare@africaprudentialregistrars.com</env-entry-value>
    </env-entry>
   
   
    <env-entry>
        <description>formula.hpcontrbbal</description>
        <env-entry-name>formula.hpcontrbbal</env-entry-name>
        <env-entry-type>java.lang.String</env-entry-type>
        <env-entry-value>Select sum(balance) as amount from accounts a inner join custaccountdetails b on  a.accountno = b.accountno and a.branch = b.branchid and a.companyid = b.companyid  inner join products c on c.code = b.product and c.branch_id = b.branchid and c.company_id = b.companyid where asegc = '%s' and c.product_type_code = 'C' and a.branch = %s and a.companyid = %s</env-entry-value>
    </env-entry>   
    <env-entry>
        <description>formula.hpsavbal</description>
        <env-entry-name>formula.hpsavbal</env-entry-name>
        <env-entry-type>java.lang.String</env-entry-type>
        <env-entry-value>Select sum(balance) as amount from accounts a inner join custaccountdetails b on  a.accountno = b.accountno and a.branch = b.branchid and a.companyid = b.companyid  inner join products c on c.code = b.product and c.branch_id = b.branchid and c.company_id = b.companyid where asegc = '%s' and c.product_type_code = 'S' and a.branch = %s and a.companyid = %s</env-entry-value>
    </env-entry> 
   <env-entry>
        <description>CRON EXECUTION LIMIT</description>
        <env-entry-name>cron.limit</env-entry-name>
        <env-entry-type>java.lang.Integer</env-entry-type>
        <env-entry-value>4</env-entry-value>
    </env-entry>
     <env-entry>
        <description>Agm URl Setup</description>
        <env-entry-name>easycoopagmbaseurl</env-entry-name>
        <env-entry-type>java.lang.String</env-entry-type>
        <env-entry-value>http://localhost:8080/Easycoopfin/votes/</env-entry-value>
    </env-entry>
   
</web-app>
